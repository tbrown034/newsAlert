# Devlog: January 27, 2026

## Theme: Simplification & Alignment

Today was about stripping away complexity that wasn't actually being used, and making sure the code, UI, and documentation all tell the same story.

---

## What We Did

### 1. About Page Cleanup

**Problem:** The About page described features that didn't exist in the code—tiers, recency bonuses, severity detection, source type scoring. This created a gap between what users read and what actually happens.

**Changes:**
- Removed "Source Tiers" section (we have tiers in code but don't expose them)
- Removed "Recency Bonus" section (not implemented)
- Removed "Severity Detection" section (not implemented)
- Removed "Source Type Scoring" section (only used internally for AI, not main feed)
- Updated intro to emphasize "chronological order (newest first)"
- Cleaned up unused icon imports

**Why:** Honesty with users. The About page should describe what actually happens, not aspirational features.

### 2. AI Summary Simplification

**Problem:** The `aiSummary.ts` had scoring logic and deduplication that added complexity without clear benefit.

**Changes:**
- Removed source type scoring from post selection
- Removed deduplication logic
- Now: pure recency—take 25 most recent posts, send to Claude

**Why:**
- **Scoring was arbitrary** - source type weights weren't validated
- **Deduplication removes signal** - if 5 sources report the same event, that's important! Claude should see that convergence and weigh it accordingly
- **Trust Claude** - the model is better at determining importance than our heuristics

**Result:** `selectAndStructurePosts()` is now ~15 lines instead of ~50.

### 3. Documentation Alignment

**Problem:** CLAUDE.md described features that were outdated or never existed.

**Changes:**
- Removed tier references from CLAUDE.md
- Updated source count to 478
- Rewrote AI Briefing section to match actual behavior
- Added "Feed Philosophy" section explaining chronological + activity detection

**Why:** Claude Code (and future me) reads these docs. They need to reflect reality.

### 4. Anthropic API Review

Reviewed the Anthropic API docs to see if we're missing any useful features:

| Feature | Assessment |
|---------|------------|
| **Prompt Caching** | Not useful—our static instructions are ~150 tokens, minimum is 1024. Most tokens are variable (posts). |
| **Rate Limits** | Already handled—we have tiered limits (30/10/5 per minute by model tier) plus 10-min server cache. |
| **Citations** | Conflicts with JSON output—designed for prose with inline citations. |
| **Search Results** | Same issue—designed for RAG with prose output, not structured JSON. |

**Why we checked:** Make sure we're not leaving performance or cost savings on the table.

**Conclusion:** Our current implementation is appropriate. The API features we're not using are designed for different use cases.

### 5. Roadmap Brainstorming

Generated ideas across three areas:
1. **New features** beyond the feed (alerts, history, personalization)
2. **New data sources** (GDACS, ACLED, CISA, etc.)
3. **Source classification system** (next project phase)

See: `docs/plans/2026-01-27-roadmap-brainstorm.md`

---

## Commits

| Hash | Message |
|------|---------|
| `d9113c0` | Simplify ranking system and align docs with reality |
| `1ab5791` | Remove deduplication - let Claude determine story importance |

---

## Current State

**Feed behavior:**
- Chronological (newest first)
- No algorithmic ranking
- Activity surge detection (frequency-based: posts/hour vs baseline)
- 20% OSINT balance (prevent wire service dominance)

**AI Briefings:**
- 25 most recent posts selected
- No scoring, no deduplication
- Claude determines importance from raw signal
- Tiered models: Haiku (quick), Sonnet (advanced), Opus (pro)

**What's NOT implemented (and that's fine):**
- Per-source quality scoring
- Recency bonuses
- Severity detection
- Deduplication

---

## Next Up

Source classification system—better metadata for the 478 sources:
- Quality ratings (accuracy, verification practices)
- Coverage profiles (topics, languages, geographic depth)
- Operational metrics (last active, frequency, success rate)

See the brainstorm doc for the full plan.

---

## Lessons

1. **Remove what you're not using.** Dead code and aspirational docs create confusion.
2. **Let the model do the work.** Heuristics we write are often worse than just giving Claude the raw data.
3. **Signal > noise.** Multiple sources reporting the same thing IS the signal. Don't dedupe it away.
4. **Check API docs periodically.** Features evolve, but not every feature fits every use case.
